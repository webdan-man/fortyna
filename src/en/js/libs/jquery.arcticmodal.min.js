!function(n){var o={type:"html",content:"",url:"",ajax:{},ajax_request:null,closeOnEsc:!0,closeOnOverlayClick:!0,clone:!1,overlay:{block:void 0,tpl:'<div class="arcticmodal-overlay"></div>',css:{backgroundColor:"#000",opacity:.6}},container:{block:void 0,tpl:'<div class="arcticmodal-container"><table class="arcticmodal-container_i"><tr><td class="arcticmodal-container_i2"></td></tr></table></div>'},wrap:void 0,body:void 0,errors:{tpl:'<div class="arcticmodal-error arcticmodal-close"></div>',autoclose_delay:2e3,ajax_unsuccessful_load:"Error"},openEffect:{type:"fade",speed:400},closeEffect:{type:"fade",speed:400},beforeOpen:n.noop,afterOpen:n.noop,beforeClose:n.noop,afterClose:n.noop,afterLoading:n.noop,afterLoadingOnShow:n.noop,errorLoading:n.noop},i=0,c=n([]),w={isEventOut:function(o,i){var c=!0;return n(o).each(function(){n(i.target).get(0)==n(this).get(0)&&(c=!1),0==n(i.target).closest("HTML",n(this).get(0)).length&&(c=!1)}),c}},a={getParentEl:function(o){var i=n(o);return i.data("arcticmodal")?i:(i=n(o).closest(".arcticmodal-container").data("arcticmodalParentEl"),i?i:!1)},transition:function(o,i,c,w){switch(w=void 0==w?n.noop:w,c.type){case"fade":"show"==i?o.fadeIn(c.speed,w):o.fadeOut(c.speed,w);break;case"none":"show"==i?o.show():o.hide(),w()}},prepare_body:function(o,i){n(".arcticmodal-close",o.body).unbind("click.arcticmodal").bind("click.arcticmodal",function(){return i.arcticmodal("close"),!1})},init_el:function(o,d){var e=o.data("arcticmodal");if(!e){if(e=d,i++,e.modalID=i,e.overlay.block=n(e.overlay.tpl),e.overlay.block.css(e.overlay.css),e.container.block=n(e.container.tpl),e.body=n(".arcticmodal-container_i2",e.container.block),d.clone?e.body.html(o.clone(!0)):(o.before('<div id="arcticmodalReserve'+e.modalID+'" style="display: none" />'),e.body.html(o)),a.prepare_body(e,o),e.closeOnOverlayClick&&e.overlay.block.add(e.container.block).click(function(i){w.isEventOut(n(">*",e.body),i)&&o.arcticmodal("close")}),e.container.block.data("arcticmodalParentEl",o),o.data("arcticmodal",e),c=n.merge(c,o),n.proxy(t.show,o)(),"html"==e.type)return o;if(void 0!=e.ajax.beforeSend){var l=e.ajax.beforeSend;delete e.ajax.beforeSend}if(void 0!=e.ajax.success){var f=e.ajax.success;delete e.ajax.success}if(void 0!=e.ajax.error){var h=e.ajax.error;delete e.ajax.error}var r=n.extend(!0,{url:e.url,beforeSend:function(){void 0==l?e.body.html('<div class="arcticmodal-loading" />'):l(e,o)},success:function(n){o.trigger("afterLoading"),e.afterLoading(e,o,n),void 0==f?e.body.html(n):f(e,o,n),a.prepare_body(e,o),o.trigger("afterLoadingOnShow"),e.afterLoadingOnShow(e,o,n)},error:function(){o.trigger("errorLoading"),e.errorLoading(e,o),void 0==h?(e.body.html(e.errors.tpl),n(".arcticmodal-error",e.body).html(e.errors.ajax_unsuccessful_load),n(".arcticmodal-close",e.body).click(function(){return o.arcticmodal("close"),!1}),e.errors.autoclose_delay&&setTimeout(function(){o.arcticmodal("close")},e.errors.autoclose_delay)):h(e,o)}},e.ajax);e.ajax_request=n.ajax(r),o.data("arcticmodal",e)}},init:function(i){if(i=n.extend(!0,{},o,i),!n.isFunction(this))return this.each(function(){a.init_el(n(this),n.extend(!0,{},i))});if(void 0==i)return void n.error("jquery.arcticmodal: Uncorrect parameters");if(""==i.type)return void n.error('jquery.arcticmodal: Don\'t set parameter "type"');switch(i.type){case"html":if(""==i.content)return void n.error('jquery.arcticmodal: Don\'t set parameter "content"');var c=i.content;return i.content="",a.init_el(n(c),i);case"ajax":return""==i.url?void n.error('jquery.arcticmodal: Don\'t set parameter "url"'):a.init_el(n("<div />"),i)}}},t={show:function(){var o=a.getParentEl(this);if(o===!1)return void n.error("jquery.arcticmodal: Uncorrect call");var i=o.data("arcticmodal");return i.overlay.block.hide(),i.container.block.hide(),n("BODY").append(i.overlay.block),n("BODY").append(i.container.block),i.beforeOpen(i,o),o.trigger("beforeOpen"),"hidden"!=i.wrap.css("overflow")&&(i.wrap.data("arcticmodalOverflow",i.wrap.css("overflow")),i.wrap.outerWidth(!0),i.wrap.outerWidth(!0)),c.not(o).each(function(){var o=n(this).data("arcticmodal");o.overlay.block.hide()}),a.transition(i.overlay.block,"show",c.length>1?{type:"none"}:i.openEffect),a.transition(i.container.block,"show",c.length>1?{type:"none"}:i.openEffect,function(){i.afterOpen(i,o),o.trigger("afterOpen")}),o},close:function(){return n.isFunction(this)?void c.each(function(){n(this).arcticmodal("close")}):this.each(function(){var o=a.getParentEl(this);if(o===!1)return void n.error("jquery.arcticmodal: Uncorrect call");var i=o.data("arcticmodal");i.beforeClose(i,o)!==!1&&(o.trigger("beforeClose"),c.not(o).last().each(function(){var o=n(this).data("arcticmodal");o.overlay.block.show()}),a.transition(i.overlay.block,"hide",c.length>1?{type:"none"}:i.closeEffect),a.transition(i.container.block,"hide",c.length>1?{type:"none"}:i.closeEffect,function(){i.afterClose(i,o),o.trigger("afterClose"),i.clone||n("#arcticmodalReserve"+i.modalID).replaceWith(i.body.find(">*")),i.overlay.block.remove(),i.container.block.remove(),o.data("arcticmodal",null),n(".arcticmodal-container").length||(i.wrap.data("arcticmodalOverflow")&&i.wrap.css("overflow",i.wrap.data("arcticmodalOverflow")),i.wrap.css("marginRight",0))}),"ajax"==i.type&&i.ajax_request.abort(),c=c.not(o))})},setDefault:function(i){n.extend(!0,o,i)}};n(function(){o.wrap=n(document.all&&!document.querySelector?"html":"body")}),n(document).bind("keyup.arcticmodal",function(n){var o=c.last();if(o.length){var i=o.data("arcticmodal");i.closeOnEsc&&27===n.keyCode&&o.arcticmodal("close")}}),n.arcticmodal=n.fn.arcticmodal=function(o){return t[o]?t[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void n.error("jquery.arcticmodal: Method "+o+" does not exist"):a.init.apply(this,arguments)}}(jQuery);